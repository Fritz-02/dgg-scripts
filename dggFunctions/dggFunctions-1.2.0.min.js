const settingsForm=document.querySelector("#chat-settings-form"),chatLines=document.querySelector(".chat-lines");class SettingItem{constructor(e,t,i,s){this.keyName=e,this.defaultValue=t,this.type=i,this.options=s,this.parent}build(){let e=document.createElement("div");e.className="form-group row";let t=document.createElement("label");t.innerHTML=this.options.text,void 0!==this.options.hint&&(t.title=this.options.hint),e.appendChild(t);let i,s=!0;switch(this.type){case"checkbox":e.className="form-group checkbox",i=document.createElement("input"),void 0!==this.options.name&&(t.name=this.options.name),i.type="checkbox",i.checked=this.parent[this.keyName],i.addEventListener("change",()=>{this.parent[this.keyName]=i.checked}),t.prepend(i),s=!1;break;case"input-number":t.style.marginBottom=0,i=document.createElement("input"),void 0!==this.options.name&&(t.name=this.options.name),i.type="number",i.className="form-control",i.min=this.options.min,i.max=this.options.max,i.placeholder=this.options.placeholder,i.value=this.parent[this.keyName],i.style.marginLeft=".6em",i.addEventListener("change",()=>{this.parent[this.keyName]=i.value});break;case"select":for(let a in e.className="form-group",t.htmlFor=this.options.id,(i=document.createElement("select")).id=this.options.id,this.options.name&&(t.name=this.options.name),i.className="form-control",this.options.options){let n=document.createElement("option");n.value=a,n.innerHTML=this.options.options[a],i.appendChild(n)}i.value=this.parent[this.keyName],i.addEventListener("change",()=>{this.parent[this.keyName]=parseInt(i.value)});break;case"textarea":(i=document.createElement("textarea")).style.resize="vertical",i.className="form-control",i.placeholder=this.options.placeholder,i.value=this.parent[this.keyName],i.addEventListener("change",()=>{let e=i.value.toLowerCase().replaceAll(" ","").split(",").filter(String);i.value.length>0?this.parent[this.keyName]=e:this.parent[this.keyName]=[]});break;case"textarea-noLower":(i=document.createElement("textarea")).style.resize="vertical",i.className="form-control",i.placeholder=this.options.placeholder,i.value=this.parent[this.keyName],i.addEventListener("change",()=>{let e=i.value.replaceAll(" ","").split(",").filter(String);i.value.length>0?this.parent[this.keyName]=e:this.parent[this.keyName]=[]});break;case"input":(i=document.createElement("input")).className="form-control",i.placeholder=this.options.placeholder,i.value=this.parent[this.keyName],i.addEventListener("change",()=>{let e=i.value.replaceAll(" ","");i.value.length>0?this.parent[this.keyName]=e:this.parent[this.keyName]=null});break;default:console.error(`Invalid setting input type: ${this.type}`)}s&&e.appendChild(i),settingsForm.appendChild(e)}}class Settings{#a;#b;constructor(e,t,i){for(let s of(this.title=e,this.#a=t,this.#b=i,this.#a)){s.parent=this;let a=s.keyName,n=`#${a}`;Object.defineProperty(this,a,{set:function(e){this[n]=e,this.#c(a,e)},get:function(){return void 0===this[n]&&(this[n]=this.#d(a)??s.defaultValue),this[n]}})}}#e(e){return`${this.#b}${e}`}#c(t,i){let s=this.#e(t);window.localStorage.setItem(s,JSON.stringify(i))}#d(a){let n=this.#e(a),l=window.localStorage.getItem(n);if(null!=l){let r=JSON.parse(l);return r}}build(){let e=document.createElement("h4");for(let t of(e.innerHTML=this.title,settingsForm.appendChild(e),this.#a))t.build()}}const userInfo=document.querySelector("div.user-info"),actionButtons=document.querySelector("div.action-buttons");function insertInfoHeader(e,t,i){let s=document.createAttribute("h5");return s.setAttribute("class",t),s.innerHTML=e,userInfo.insertBefore(s,i),s}function addAction(e,t){let i=document.createElement("a");i.setAttribute("id",e),i.setAttribute("title",t);let s=document.createElement("i");s.setAttribute("class","btn-icon"),i.appendChild(s),actionButtons.appendChild(i)}